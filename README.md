# Pastebin на Go (Микросервисная архитектура)

## Описание

Этот проект представляет собой систему Pastebin, реализованную на языке Go с использованием двух микросервисов. Система позволяет создавать текстовые записи, генерировать короткие ссылки для их просмотра и управлять сроком хранения записей. Микросервисы взаимодействуют друг с другом через HTTP.

## Архитектура

Проект состоит из двух микросервисов:

### 1. Paste Service (Сервис приёма и хранения)

- Принимает текстовые записи через API.
- Генерирует уникальные короткие хэши для записей.
- Позволяет указать срок хранения записи (TTL).
- Сохраняет записи сначала во временный файл, а затем в базу данных.

### 2. API Service (Сервис предоставления данных)

- Обрабатывает запросы на получение записей по ID (или хэшу).
- Возвращает запись в формате JSON.
- Проверяет TTL записей и удаляет устаревшие записи.
- Учёт популярности записей через счётчик просмотров.

## Функционал

- **Создание текстовых записей**: пользователи могут создать текстовые записи, которые будут сохранены в системе.
- **Генерация коротких ссылок**: каждой записи присваивается уникальный короткий хэш.
- **Указание срока хранения**: при создании записи можно указать TTL (время жизни записи).
- **Просмотр записей**: пользователи могут открыть ссылку и просматривать запись.
- **Удаление устаревших записей**: записи автоматически удаляются по истечении TTL.
- **Поддержка популярности**: каждый запрос на запись увеличивает её популярность, и наиболее популярные записи могут быть выделены.

## Требования

- Go 1.20+
- PostgreSQL (или другая поддерживаемая база данных)
- Docker (для контейнеризации)

## Установка и запуск

1. Клонируйте репозиторий:
   ```sh
   git clone https://github.com/lgritsyuk/pastebin-go.git
   cd pastebin-go
   ```
2. Соберите и запустите контейнеры с помощью Docker Compose:
   ```sh
   docker-compose up --build
   ```
3. Приложение будет доступно по адресу `http://localhost:8080`

## API эндпоинты

### Paste Service

- `POST /paste` – создать новую запись.
- `GET /paste/{id}` – получить запись по её идентификатору.
- `PUT /paste/{id}` – обновить существующую запись.
- `DELETE /paste/{id}` – удалить запись вручную.
- `GET /paste/popular` – получить список популярных записей.

### API Service

- `GET /api/paste/{hash}` – получить запись по хэшу.
- `DELETE /api/paste/{hash}` – удалить запись (по истечении TTL).
- `GET /api/paste/recent` – получить список последних добавленных записей.
- `GET /api/paste/stats/{hash}` – получить статистику просмотров записи.

