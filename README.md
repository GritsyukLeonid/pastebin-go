# Pastebin на Go

## Описание

Это монолитный HTTP-сервис на Go (с тестовой grpc реализацией в виде двух микросервисов) реализующий систему управления текстовыми записями (Pastebin) с поддержкой пользователей, статистики и коротких ссылок. В качестве хранилища используется PostgreSQL, для логирования действий применяется Redis с TTL. Также присутствует OpenAPI-документация через Swagger UI.

## Архитектура

Проект структурирован по слоям:

internal/
├── cmd/ # Тестовая grpc реализация двух микросервисов
├── handlers/ # HTTP-обработчики
├── service/ # Бизнес-логика и unit-тесты
├── repository/ # Работа с PostgreSQL
├── logging/ # Redis-логирование
├── migrations/ # SQL-миграции
└── main.go # Точка входа (монолитный HTTP-сервер)

## Основной функционал

- **Paste**
  - Создание, просмотр и удаление текстовых записей.
  - TTL для каждой пасты.
- **ShortURL**
  - Генерация коротких ссылок и доступ к текстовым записям по ним.
- **Stats**
  - Учёт количества просмотров текстовых записей.
- **User**
  - Создание и получение информации о пользователях.
- **Логирование**
  - Все действия логируются в Redis с заданным временем жизни.

## Технологии

- Язык: Go
- БД: PostgreSQL
- Кэш и логирование: Redis
- Маршрутизация: Gorilla Mux
- Swagger-документация: Swaggo (httpSwagger)
- Миграции: golang-migrate

## Сборка и запуск

### Предварительные требования

- Go 1.21+
- PostgreSQL
- Redis
- Docker (для упрощения запуска)

### Запуск с Docker Compose

```bash
docker-compose up --build
```

Сервис будет доступен на http://localhost:8080

Swagger UI: http://localhost:8080/swagger/index.html

## Переменные окружения
POSTGRES_DSN — строка подключения к PostgreSQL (по умолчанию используется: postgres://user:password@localhost:5432/pastebin?sslmode=disable)

REDIS_ADDR — адрес Redis (по умолчанию: localhost:6379)

## Миграции
При запуске автоматически применяются миграции из internal/migrations.

## Тестирование
```bash
go test ./...
```

Покрытие бизнес-логики реализовано через табличные unit-тесты в internal/service.

## Документация
Swagger-описание доступно по адресу: /swagger/index.html.



